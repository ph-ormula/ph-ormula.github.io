<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">

	{%- include head.html -%}

	<body>

		{%- include header.html -%}

		<main class="page-content" aria-label="Content">
			<div class="wrapper{% if page.toc %} with-toc{% endif %}">
				{% if page.toc %}
				<aside class="page-toc">
					<nav class="toc-nav">
						<div class="toc-title">Contents</div>
						<div id="toc-list"></div>
					</nav>
				</aside>
				{% endif %}
				<div class="page-main-content">
					{{ content }}
				</div>
			</div>
		</main>

		{%- include footer.html -%}

		{% if page.toc %}
		<script src="{{ "/assets/js/toc.js" | relative_url }}"></script>
		{% endif %}

		<!-- Font Toggle Script -->
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const root = document.documentElement;
				const toggleBtn = document.createElement('button');
				toggleBtn.className = 'font-toggle-btn';
				toggleBtn.innerHTML = 'Aa<span class="tooltip">change reading font</span>';
				
				// Load saved font preference or default to Futura
				const savedFont = localStorage.getItem('preferredFont') || 'Futura Std';
				root.style.setProperty('--current-font', `'${savedFont}'`);
				
				toggleBtn.addEventListener('click', function() {
					const currentFont = root.style.getPropertyValue('--current-font').replace(/['"]/g, '');
					const newFont = currentFont === 'Futura Std' ? 'Open Dyslexic Propo' : 'Futura Std';
					
					root.style.setProperty('--current-font', `'${newFont}'`);
					localStorage.setItem('preferredFont', newFont);
				});
				
				document.body.appendChild(toggleBtn);
			});
		</script>

	</body>

</html>
